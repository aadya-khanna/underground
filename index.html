<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/typeit@8.7.1/dist/index.umd.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <title> PetIt </title>
</head>
<body>
    <div id="hero"> 
        <h1 id="simpleUsage"> </h1>
    </div>

    <div id="pet-options">
        <span onclick="selectPet('bob')">bob</span> |
        <span onclick="selectPet('simmer')">simmer</span> |
        <span onclick="selectPet('steve')">steve</span>
    </div>
    
    <div id="img">
        <img id="mainimg" style="display: none;">
    </div>

    <script> 
        let typeItInstance;
        let hasTypedHi = false;
        let salutations = ["Hi!", "Hello!", "AHOJJJ!", "Bonjour,", "Hola,", "Hey,", "Sup!!"]; 

        function startTypewriter(pet) 
        {
            const name = pet.charAt(0).toUpperCase() + pet.slice(1);
            const target = document.getElementById("simpleUsage");

            const randomSalutation = salutations[Math.floor(Math.random() * salutations.length)];

    // Destroy old typewriter instance if it exists
            if (typeItInstance) {
                typeItInstance.destroy();
            }

            if (!hasTypedHi) {
                // Start by typing "Hi!" if it hasn't been typed yet
                typeItInstance = new TypeIt("#simpleUsage", {
                speed: 100,
                lifeLike: true,
                waitUntilVisible: true
                })
                .type("Hi!")  // Type Hi! only once
                .pause(300)
                .go();

                hasTypedHi = true;
            } else {
                // After "Hi!" is typed, we want to clear the rest of the line and type the new pet's name
                target.textContent = randomSalutation;
                typeItInstance = new TypeIt("#simpleUsage", {
                startDelay: 300,
                speed: 100,
                lifeLike: true,
                waitUntilVisible: true,
                cursor: true
                })
                .move(null, { to: "END" })  // Move cursor to the end of "Hi!"
                .type(` I am ${name}.`)  // Append the new pet's name
                .go();
            }
        }

        function selectPet(pet) {
        const img = document.getElementById("mainimg");
        startTypewriter(pet);
        img.src = `images/${pet}.png`;
        img.style.display = "block";
        }

        startTypewriter("");  
    </script>
</body>
</html>
